@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  --foreground-rgb: 0, 0, 0;
  --background-start-rgb: 255, 255, 255;
  --background-end-rgb: 255, 255, 255;
}

body {
  color: rgb(var(--foreground-rgb));
  background: linear-gradient(
      to bottom,
      transparent,
      rgb(var(--background-end-rgb))
    )
    rgb(var(--background-start-rgb));
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Hiragino Sans', 'Noto Sans CJK JP', sans-serif;
}

/* 震度別カラー */
.intensity-1 { background-color: #f0f0f0; color: #333; }
.intensity-2 { background-color: #00aaff; color: white; }
.intensity-3 { background-color: #0041ff; color: white; }
.intensity-4 { background-color: #fae696; color: #333; }
.intensity-5-lower { background-color: #ffe600; color: #333; }
.intensity-5-upper { background-color: #ff9900; color: white; }
.intensity-6-lower { background-color: #ff2800; color: white; }
.intensity-6-upper { background-color: #a50021; color: white; }
.intensity-7 { background-color: #b40068; color: white; }

/* 警報レベル別カラー */
.alert-advisory { background-color: #fbbf24; color: #333; }
.alert-warning { background-color: #f97316; color: white; }
.alert-emergency { background-color: #dc2626; color: white; }

/* アニメーション */
@keyframes pulse-alert {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.7; }
}

.pulse-alert {
  animation: pulse-alert 1s ease-in-out infinite;
}

/* Leaflet地図コンテナ */
.leaflet-container {
  height: 400px;
  width: 100%;
  border-radius: 0.5rem;
  z-index: 0;
}

/* 地震マーカーのスタイル */
.earthquake-marker {
  background: transparent;
  border: none;
}

/* Leafletポップアップのカスタマイズ */
.leaflet-popup-content-wrapper {
  border-radius: 0.5rem;
  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
}

.leaflet-popup-content {
  margin: 12px;
}

.leaflet-popup-tip {
  box-shadow: none;
}

/* ========================================
   アニメーション定義（視覚的強化）
   ======================================== */

/* 地震マーカーのパルスアニメーション */
@keyframes marker-pulse {
  0%, 100% { transform: scale(1); opacity: 1; }
  50% { transform: scale(1.15); opacity: 0.85; }
}

/* 緊急アラートのパルス */
@keyframes emergency-pulse {
  0%, 100% { background-color: rgba(185, 28, 28, 0.95); }
  50% { background-color: rgba(220, 38, 38, 1); }
}

.animate-emergency-pulse {
  animation: emergency-pulse 1s ease-in-out infinite;
}

/* アラート出現アニメーション */
@keyframes alert-appear {
  0% { transform: scale(0.9); opacity: 0; }
  100% { transform: scale(1); opacity: 1; }
}

.animate-alert-appear {
  animation: alert-appear 0.3s ease-out;
}

/* 地震揺れアニメーション */
@keyframes shake {
  0%, 100% { transform: translateX(0); }
  10%, 30%, 50%, 70%, 90% { transform: translateX(-4px); }
  20%, 40%, 60%, 80% { transform: translateX(4px); }
}

.animate-shake {
  animation: shake 0.5s ease-in-out infinite;
}

/* 波アニメーション（津波用） */
@keyframes wave {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-4px); }
}

.animate-wave {
  animation: wave 2s ease-in-out infinite;
}

/* 現在地マーカーのパルス */
@keyframes location-pulse {
  0%, 100% {
    box-shadow: 0 0 0 0 rgba(59, 130, 246, 0.4);
    transform: scale(1);
  }
  50% {
    box-shadow: 0 0 0 20px rgba(59, 130, 246, 0);
    transform: scale(1.05);
  }
}

.current-location-marker div {
  animation: location-pulse 2s ease-in-out infinite;
}

/* ========================================
   高コントラストモード対応
   ======================================== */

@media (prefers-contrast: high) {
  .intensity-1 { background-color: #ffffff; color: #000; border: 2px solid #000; }
  .intensity-2 { background-color: #0066cc; color: white; border: 2px solid #000; }
  .intensity-3 { background-color: #0000cc; color: white; border: 2px solid #000; }
  .intensity-4 { background-color: #ffff00; color: #000; border: 2px solid #000; }
  .intensity-5-lower { background-color: #ffcc00; color: #000; border: 2px solid #000; }
  .intensity-5-upper { background-color: #ff9900; color: #000; border: 2px solid #000; }
  .intensity-6-lower { background-color: #ff0000; color: white; border: 2px solid #000; }
  .intensity-6-upper { background-color: #cc0000; color: white; border: 2px solid #000; }
  .intensity-7 { background-color: #990099; color: white; border: 2px solid #000; }
}

/* ========================================
   ダークモード対応（将来用）
   ======================================== */

@media (prefers-color-scheme: dark) {
  :root {
    --foreground-rgb: 255, 255, 255;
    --background-start-rgb: 17, 24, 39;
    --background-end-rgb: 17, 24, 39;
  }
}

/* ========================================
   アクセシビリティ：モーション軽減
   ======================================== */

@media (prefers-reduced-motion: reduce) {
  .animate-shake,
  .animate-wave,
  .animate-alert-appear,
  .animate-emergency-pulse,
  .pulse-alert,
  .current-location-marker div {
    animation: none !important;
  }
}

/* ========================================
   避難所マーカー
   ======================================== */

.shelter-marker {
  background: transparent;
  border: none;
}

/* 強化された地震マーカー */
.earthquake-marker-enhanced {
  background: transparent;
  border: none;
}
